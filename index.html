<!--

VIM command

%s/<a class="headerlink".\{-}<\/a>//g | %s/<\/div>//g | %s///g | %s/<code>/<code>/g | %s/<\/span><\/code>/<\/code>/g | %s/\%u2019/'/g  | %s/\(\%u201C\|\%u201D\)/"/g | %s/ alt=".\{-}"//gc | %s/\.\.\/\.\.\/_images/image/gc

-->
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
     
  <title>Database Backends &#8212; Brightspot Docs 3.2.4 documentation</title>
</head>
<body>
        <div class="Content-document" role="main">
        
                <div class="section" id="annotations">
              <h1>Annotations<a class="headerlink" href="#annotations" title="Permalink to this headline">¶</a></h1>
              <p>The Dari framework provides Java annotations that enhances the behavior or the processing of Model classes or fields. For example, the <code class="code docutils literal notranslate"><span class="pre">&#64;DisplayName</span></code> annotation substitutes descriptive names in place of actual field or class names in the UI. The <code class="code docutils literal notranslate"><span class="pre">&#64;Indexed</span></code> annotation triggers runtime indexing of fields or methods so that they can be queried.</p>
              <p>This topic shows you how to use Dari annotations. For a comprehensive list of Dari annotations, see the Dari Javadoc. Refer to “Annotation Types” in the <a class="reference external" href="https://artifactory.psdops.com/psddev-releases/com/psddev/dari-db/3.3.607-xe0f27a/dari-db-3.3.607-xe0f27a-javadoc.jar!/com/psddev/dari/db/package-summary.html">com.psddev.dari.db</a> and <a class="reference external" href="https://artifactory.psdops.com/psddev-releases/com/psddev/dari-util/3.3.607-xe0f27a/dari-util-3.3.607-xe0f27a-javadoc.jar!/com/psddev/dari/util/package-summary.html">com.psddev.dari.util</a> packages.</p>
              <p>As shown in the following example, a class annotation is placed above the class declaration, whereas a field annotation can be placed above the target field or beside the field declaration.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Recordable.BootstrapPackages</span><span class="o">(</span><span class="s">&quot;System Activities&quot;</span><span class="o">)</span>
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Activity</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                 <span class="nd">@Indexed</span>
                 <span class="kd">private</span> <span class="n">Date</span> <span class="n">activityDate</span><span class="o">;</span>
              
                 <span class="nd">@Required</span> <span class="kd">private</span> <span class="n">User</span> <span class="n">activityUser</span><span class="o">;</span>
              
                 <span class="kd">private</span> <span class="n">Project</span> <span class="n">project</span><span class="o">;</span>
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">type</span><span class="o">;</span>
                 <span class="o">...</span>
              
               <span class="o">}</span>
              </pre></div>
              </div>
              <div class="section" id="lazyload">
              <h2>&#64;LazyLoad<a class="headerlink" href="#lazyload" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Class</p>
              <p>Denotes that the objects referenced by fields in the target type are lazily loaded. For example, to facilitate smooth browsing through a photo gallery with several images, image initialization is deferred until the point at which it is needed.</p>
              </div>
              <div class="section" id="modification-classes">
              <span id="mod-classes-label"></span><h2>&#64;Modification.Classes<a class="headerlink" href="#modification-classes" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Class</p>
              <p>Specifies an array of classes that the target type should modify. This takes precedence over the <code class="docutils literal notranslate"><span class="pre">T</span></code> type argument in <code class="code docutils literal notranslate"><span class="pre">Modification</span></code>. In the following, <code class="code docutils literal notranslate"><span class="pre">Bar</span></code> would apply only to <code class="code docutils literal notranslate"><span class="pre">Foo</span></code>, not <code class="code docutils literal notranslate"><span class="pre">Object</span></code>:</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Modification.Classes</span><span class="o">({</span> <span class="n">Foo</span><span class="o">.</span><span class="na">class</span> <span class="o">})</span>
              <span class="kd">class</span> <span class="nc">Bar</span> <span class="kd">extends</span> <span class="n">Modification</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="o">{</span>
                 <span class="o">...</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>For more information, see <a class="reference internal" href="modifications.html"><span class="doc">Modifications</span></a>.</p>
              </div>
              <div class="section" id="objectfield-annotationprocessorclass">
              <h2>&#64;ObjectField.AnnotationProcessorClass<a class="headerlink" href="#objectfield-annotationprocessorclass" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Annotation</p>
              <p>Specifies the processor class that can manipulate a field definition using the target annotation. For an annotation applied to a field, <code class="code docutils literal notranslate"><span class="pre">ObjectField.AnnotationProcessorClass</span></code> specifies the implemented class that Dari will use to processes the field. For a custom annotation, you implement <a class="reference external" href="https://artifactory.psdops.com/psddev-releases/com/psddev/dari-db/3.3.607-xe0f27a/dari-db-3.3.607-xe0f27a-javadoc.jar!/com/psddev/dari/db/ObjectField.AnnotationProcessor.html">ObjectField.AnnotationProcessor</a>.</p>
              </div>
              <div class="section" id="objecttype-annotationprocessorclass">
              <h2>&#64;ObjectType.AnnotationProcessorClass<a class="headerlink" href="#objecttype-annotationprocessorclass" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Annotation</p>
              <p>Specifies the processor class that can manipulate a class using the target annotation. For an annotation applied to a class,
              <code class="code docutils literal notranslate"><span class="pre">ObjectType.AnnotationProcessorClass</span></code> specifies the implementation that Dari will use to processes the class. For a custom annotation, you implement <a class="reference external" href="https://artifactory.psdops.com/psddev-releases/com/psddev/dari-db/3.3.607-xe0f27a/dari-db-3.3.607-xe0f27a-javadoc.jar!/com/psddev/dari/db/ObjectType.AnnotationProcessor.html">ObjectType.AnnotationProcessor</a>.</p>
              </div>
              <div class="section" id="recordable-abstract">
              <h2>&#64;Recordable.Abstract<a class="headerlink" href="#recordable-abstract" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Class</p>
              <p>Similar to specifying a Java class as <code class="docutils literal notranslate"><span class="pre">abstract</span></code>, this annotation prevents instances of the target type from being written to the database. The underlying <a class="reference external" href="https://artifactory.psdops.com/psddev-releases/com/psddev/dari-db/3.3.607-xe0f27a/dari-db-3.3.607-xe0f27a-javadoc.jar!/com/psddev/dari/db/ObjectType.html">ObjectType</a> will be created, but only when <code class="code docutils literal notranslate"><span class="pre">ObjectType#isConcrete</span></code> is true can an object be saved to the database.</p>
              <p>In the example below, the <code class="code docutils literal notranslate"><span class="pre">Project</span></code> class can be created, but only subclassed instances of <code class="code docutils literal notranslate"><span class="pre">Project</span></code> can be saved to the database:</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Abstract</span>
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Project</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                <span class="o">...</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-beanproperty">
              <span id="bean-property-label"></span><h2>&#64;Recordable.BeanProperty<a class="headerlink" href="#recordable-beanproperty" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Class</p>
              <p>For use with JSPs, this annotation specifies the JavaBeans property name that can be used to access an instance of the target type as a modification. It is useful if you need to add new fields to existing objects and the fields will be rendered.</p>
              <p>For example, say that you need to add two fields, <code class="docutils literal notranslate"><span class="pre">promoTitle</span></code> and <code class="docutils literal notranslate"><span class="pre">promoImage</span></code>, to a group of objects. You would create an interface that classes requiring the new fields will implement. The interface includes a static class that extends <code class="code docutils literal notranslate"><span class="pre">Modification</span></code> and declares the new fields.
              Note that the <code class="code docutils literal notranslate"><span class="pre">&#64;BeanProperty</span></code> annotation specifies the name by which the static class will be accessed.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Promotable</span> <span class="kd">extends</span> <span class="n">Recordable</span> <span class="o">{</span>
              
              <span class="hll">         <span class="nd">@BeanProperty</span><span class="o">(</span><span class="s">&quot;promotable&quot;</span><span class="o">)</span>
              </span>         <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">DefaultPromotable</span> <span class="kd">extends</span> <span class="n">Modification</span><span class="o">&lt;</span><span class="n">Promotable</span><span class="o">&gt;</span> <span class="o">{</span>
              
                          <span class="nd">@Indexed</span>
                          <span class="kd">private</span> <span class="n">String</span> <span class="n">promoTitle</span><span class="o">;</span>
                          <span class="kd">private</span> <span class="n">Image</span> <span class="n">promoImage</span><span class="o">;</span>
              
                          <span class="c1">// Getters Setters</span>
              
                       <span class="o">}</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>Any classes that require the new fields must be updated to implement <code class="code docutils literal notranslate"><span class="pre">Promotable</span></code>, with the new fields added.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Blog</span> <span class="kd">extends</span> <span class="n">Content</span> <span class="kd">implements</span> <span class="n">Promotable</span> <span class="o">{</span>
              
                     <span class="kd">private</span> <span class="n">String</span> <span class="n">promoTitle</span><span class="o">;</span>
                     <span class="kd">private</span> <span class="n">Image</span> <span class="n">promoTitle</span><span class="o">;</span>
              
                 <span class="c1">// Getters Setters</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>To access the newly added fields when rendering the content, the  <code class="code docutils literal notranslate"><span class="pre">&#64;BeanProperty(&quot;promotable&quot;)</span></code> is used:</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">cms</span><span class="o">:</span><span class="n">render</span> <span class="n">value</span><span class="o">=</span><span class="s">&quot;${content.promotable.promoTitle}&quot;</span> <span class="o">/&gt;</span>
              <span class="o">&lt;</span><span class="n">cms</span><span class="o">:</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s">&quot;${content.promotable.promoImage}&quot;</span> <span class="o">/&gt;</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-bootstrappackages">
              <span id="bs-packages-label"></span><h2>&#64;Recordable.BootstrapPackages<a class="headerlink" href="#recordable-bootstrappackages" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Class</p>
              <p>Enables objects of the target class to be exported to a custom package identified by the <code class="docutils literal notranslate"><span class="pre">value</span></code> argument. This annotation is used in conjunction with the <a class="reference internal" href="../debugging/database-bootstrap.html"><span class="doc">Database Bootstrap tool</span></a>, which performs export and import operations between Brightspot environments with the same underlying data Model. Target classes to which this annotation is applied are listed in the Database Bootstrap tool.</p>
              <p>The required <code class="docutils literal notranslate"><span class="pre">value</span></code> argument specifies one or more packages to export object data. A package is a JSON file that can be downloaded from the Database Bootstrap tool. A separate JSON file is created for each package specified in the annotation.</p>
              <p>The optional <code class="docutils literal notranslate"><span class="pre">depends</span></code> argument specifies data types on which the target class is dependent. The specified data types will appear in a selection list in the Database Bootstrap tool. The selection list is associated with the packages set in the <code class="docutils literal notranslate"><span class="pre">value</span></code> argument. This allows the tool user to select the dependent types to export with the objects of the target class.</p>
              <div class="admonition note">
              <p class="first admonition-title">Note</p>
              <p class="last">All objects of the types specified in the <code class="docutils literal notranslate"><span class="pre">depends</span></code> argument are eligible for export, which could be many more objects than are actually referenced by instances of the target class. For example, if the target class references two object types, then each instance of the class references two objects. If you specify those same object types in the <code class="docutils literal notranslate"><span class="pre">depends</span></code> argument, all objects of those types can be selected for export, even if some of those objects are not referenced by instances of the target class. To limit dependencies to only referenced objects, see the <code class="code docutils literal notranslate"><span class="pre">&#64;BootstrapFollowReferences</span></code> annotation.</p>
              </div>
              <p>In the following example, the annotation enables <code class="code docutils literal notranslate"><span class="pre">Activity</span></code> objects to be exported to a package called “System Activities”. In addition, the <code class="code docutils literal notranslate"><span class="pre">User</span></code> and <code class="code docutils literal notranslate"><span class="pre">Project</span></code> types will appear in a selection list in the Database Bootstrap tool. If the tool user selects those types, then all <code class="code docutils literal notranslate"><span class="pre">User</span></code> and <code class="code docutils literal notranslate"><span class="pre">Project</span></code> objects will be exported, including those that are not referenced by <code class="code docutils literal notranslate"><span class="pre">Activity</span></code> objects.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="hll"> <span class="nd">@Recordable.BootstrapPackages</span><span class="o">(</span><span class="n">value</span><span class="o">={</span><span class="s">&quot;System Activities&quot;</span><span class="o">},</span> <span class="n">depends</span><span class="o">={</span><span class="n">User</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">Project</span><span class="o">.</span><span class="na">class</span><span class="o">}</span>
              </span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Activity</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                  <span class="kd">private</span> <span class="n">Date</span> <span class="n">activityDate</span><span class="o">;</span>
                  <span class="kd">private</span> <span class="n">String</span> <span class="n">activityType</span><span class="o">;</span>
              
              <span class="hll">    <span class="kd">private</span> <span class="n">User</span> <span class="n">activityUser</span><span class="o">;</span>
              </span><span class="hll">    <span class="kd">private</span> <span class="n">Project</span> <span class="n">project</span><span class="o">;</span>
              </span>
                  <span class="c1">// Getters and Setters</span>
               <span class="o">}</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-bootstrapfollowreferences">
              <span id="bs-follow-references-label"></span><h2>&#64;Recordable.BootstrapFollowReferences<a class="headerlink" href="#recordable-bootstrapfollowreferences" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field</p>
              <p>When the <a class="reference internal" href="#bs-packages-label"><span class="std std-ref">&#64;Recordable.BootstrapPackages</span></a> annotation is applied to a class, <code class="code docutils literal notranslate"><span class="pre">&#64;BootstrapFollowReferences</span></code> can be applied to fields that reference <code class="code docutils literal notranslate"><span class="pre">Record</span></code>-derived objects. This annotation enables the referenced objects to be exported to the package specified in the <code class="code docutils literal notranslate"><span class="pre">&#64;BootstrapPackages</span></code> annotation. The <a class="reference internal" href="../debugging/database-bootstrap.html"><span class="doc">Database Bootstrap tool</span></a> performs export and import operations between Brightspot environments with the same underlying data Model.</p>
              <div class="admonition note">
              <p class="first admonition-title">Note</p>
              <p class="last"><code class="code docutils literal notranslate"><span class="pre">&#64;BootstrapFollowReferences</span></code> enables only referenced objects to be exported to the package specified in the <code class="code docutils literal notranslate"><span class="pre">&#64;BootstrapPackages</span></code> annotation. Other objects of the same data type as the referenced objects are not exported. This export behavior contrasts with the use of the <code class="docutils literal notranslate"><span class="pre">depends</span></code> argument in the <code class="code docutils literal notranslate"><span class="pre">&#64;BootstrapPackages</span></code> annotation.</p>
              </div>
              <p>In the following example, the <code class="code docutils literal notranslate"><span class="pre">&#64;BootstrapPackages</span></code> annotation enables <code class="code docutils literal notranslate"><span class="pre">Activity</span></code> objects to be exported to a package called “System Activities”. Two fields of the target class reference <code class="code docutils literal notranslate"><span class="pre">Record</span></code>-derived types, <code class="code docutils literal notranslate"><span class="pre">User</span></code> and <code class="code docutils literal notranslate"><span class="pre">Project</span></code>, and are targets of the <code class="code docutils literal notranslate"><span class="pre">&#64;BootstrapFollowReferences</span></code> annotation. Therefore, all objects of type <code class="code docutils literal notranslate"><span class="pre">User</span></code> and <code class="code docutils literal notranslate"><span class="pre">Project</span></code> that are referenced by <code class="code docutils literal notranslate"><span class="pre">Activity</span></code> objects will be exported along with the <code class="code docutils literal notranslate"><span class="pre">Activity</span></code> objects.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="hll"> <span class="nd">@Recordable.BootstrapPackages</span><span class="o">(</span><span class="s">&quot;System Activities&quot;</span><span class="o">)</span>
              </span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Activity</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                  <span class="kd">private</span> <span class="n">Date</span> <span class="n">activityDate</span><span class="o">;</span>
                  <span class="kd">private</span> <span class="n">String</span> <span class="n">activityType</span><span class="o">;</span>
              
              <span class="hll">    <span class="nd">@Recordable.BootstrapFollowReferences</span>
              </span><span class="hll">    <span class="kd">private</span> <span class="n">User</span> <span class="n">activityUser</span><span class="o">;</span>
              </span><span class="hll">
              </span><span class="hll">    <span class="nd">@Recordable.BootstrapFollowReferences</span>
              </span><span class="hll">    <span class="nd">@private</span> <span class="n">Project</span> <span class="n">project</span><span class="o">;</span>
              </span>
                  <span class="c1">// Getters and Setters</span>
               <span class="o">}</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-collectionmaximum">
              <h2>&#64;Recordable.CollectionMaximum<a class="headerlink" href="#recordable-collectionmaximum" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field</p>
              <p>Supported on any subclass of <code class="code docutils literal notranslate"><span class="pre">Collection</span></code>, this annotation specifies the maximum number of items in the target collection. In the following example, no more than 8 <code class="code docutils literal notranslate"><span class="pre">Slide</span></code> objects can be added to the list.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Gallery</span> <span class="kd">extends</span> <span class="n">Content</span> <span class="o">{</span>
              
                <span class="nd">@CollectionMaximum</span><span class="o">(</span><span class="mi">8</span><span class="o">)</span>
                <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Slide</span><span class="o">&gt;</span> <span class="n">slides</span><span class="o">;</span>
              
                <span class="o">...</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-collectionminimum">
              <h2>&#64;Recordable.CollectionMinimum<a class="headerlink" href="#recordable-collectionminimum" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field</p>
              <p>Supported on any subclass of <code class="code docutils literal notranslate"><span class="pre">Collection</span></code>, this annotation specifies the minimum number of items in the target collection. In the following example, at least one <code class="code docutils literal notranslate"><span class="pre">Slide</span></code> object must be added to the list.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Gallery</span> <span class="kd">extends</span> <span class="n">Content</span> <span class="o">{</span>
              
                <span class="nd">@CollectionMinimum</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
                <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Slide</span><span class="o">&gt;</span> <span class="n">slides</span><span class="o">;</span>
              
                <span class="o">...</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-denormalized">
              <h2>&#64;Recordable.Denormalized<a class="headerlink" href="#recordable-denormalized" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field, Class</p>
              <p>For Solr indexing purposes only, this annotation specifies whether a reference field is denormalized within instances of a referring class. Denormalizing forces Dari to copy data of referenced objects to instances of the referring class. The denormalized data is saved in the Solr index; it is not visible on the referring object. If set on a class, the annotation applies to all of the reference fields in the class.</p>
              <div class="admonition note">
              <p class="first admonition-title">Note</p>
              <p class="last">The annotation is reserved for advanced cases. Only use when it is absolutely necessary.</p>
              </div>
              <p>This annotation is useful in site searches where the query criteria specifies data from both referenced and referring objects. In the followiing example, the <code class="code docutils literal notranslate"><span class="pre">Person</span></code> class references the  <code class="code docutils literal notranslate"><span class="pre">State</span></code> class with a field marked with the <code class="code docutils literal notranslate"><span class="pre">&#64;Denormalized</span></code> annotation.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// referenced class</span>
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">State</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                 <span class="nd">@Indexed</span>
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">stateName</span><span class="o">;</span>
              
                 <span class="nd">@Indexed</span><span class="o">(</span><span class="n">unique</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">stateAbbreviation</span><span class="o">;</span>
              
                <span class="c1">// getters and setters</span>
              <span class="o">}</span>
              
              <span class="c1">// referring class</span>
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                 <span class="nd">@Indexed</span>
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="o">;</span>
              
                 <span class="nd">@Indexed</span>
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">lastName</span><span class="o">;</span>
              
                 <span class="nd">@Indexed</span>
                 <span class="nd">@Denormalized</span>
                 <span class="kd">private</span> <span class="n">State</span> <span class="n">state</span><span class="o">;</span>
              
                 <span class="c1">// getters and setters</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>In the Solr index, Dari copies the data of <code class="code docutils literal notranslate"><span class="pre">State</span></code> objects to the referring <code class="code docutils literal notranslate"><span class="pre">Person</span></code> objects. This allows Solr to find <code class="code docutils literal notranslate"><span class="pre">Person</span></code> objects based on text stored in <code class="code docutils literal notranslate"><span class="pre">Person</span></code> objects and on text in referenced <code class="code docutils literal notranslate"><span class="pre">State</span></code> objects. For example, the following query searches the Solr index for <code class="code docutils literal notranslate"><span class="pre">Person</span></code> objects with a string of “Gena Roberts”, which is stored in a <code class="code docutils literal notranslate"><span class="pre">Person</span></code> object, and a string of “North Dakota”, which is stored in a <code class="code docutils literal notranslate"><span class="pre">State</span></code> object that is referenced by the <code class="code docutils literal notranslate"><span class="pre">Person</span></code> object.</p>
              <div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;Gena Roberts AND North Dakota&quot;
              </pre></div>
              </div>
              <p>If the <code class="code docutils literal notranslate"><span class="pre">&#64;Denormalized</span></code> annotation is not applied in the <code class="code docutils literal notranslate"><span class="pre">Person</span></code> class, then the above Solr query would fail to retrieve any <code class="code docutils literal notranslate"><span class="pre">Person</span></code> objects.</p>
              </div>
              <div class="section" id="recordable-displayname">
              <span id="displayname-label"></span><h2>&#64;Recordable.DisplayName<a class="headerlink" href="#recordable-displayname" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field, Class, Method</p>
              <p>Specifies the target’s name, which the frontend of an application can optionally display to end users. In the following example, the annotation is applied to the title field, which can be displayed as “Headline” to end users.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Article</span> <span class="kd">extends</span> <span class="n">Content</span> <span class="o">{</span>
              
                 <span class="nd">@Recordable.DisplayName</span><span class="o">(</span><span class="s">&quot;Headline&quot;</span><span class="o">)</span>
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>When the annotation is applied to a class, then the specified name can be used for display in place of the class name.</p>
              <p>The annotation can also be applied to an <code class="code docutils literal notranslate"><span class="pre">&#64;Indexed</span></code> method that returns a calculated value (not one entered by a user). By default, values returned by indexed methods are unavailable for display in the frontend. However, if <code class="code docutils literal notranslate"><span class="pre">&#64;DisplayName</span></code> is applied to an indexed method, a frontend can display the calculated value with the specified name. For more information on indexing, see <a class="reference internal" href="indexes.html"><span class="doc">Indexes</span></a>.</p>
              </div>
              <div class="section" id="recordable-embedded">
              <h2>&#64;Recordable.Embedded<a class="headerlink" href="#recordable-embedded" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field, Class</p>
              <p>Specifies whether the target class type is embedded within another class type. That is, an embedded type is not stored as a separate record in the underlying database, but is embedded in the record of the containing object. Embedded objects cannot be directly instantiated, saved, or queried. They must be accessed through the containing object.</p>
              <p>In the following example, <code class="code docutils literal notranslate"><span class="pre">Contact</span></code> is embedded within <code class="code docutils literal notranslate"><span class="pre">Company</span></code>.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Contact</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">poBox</span><span class="o">;</span>
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">city</span><span class="o">;</span>
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">state</span><span class="o">;</span>
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">zip</span><span class="o">;</span>
              
                 <span class="o">...</span>
              <span class="o">}</span>
              
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Company</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                 <span class="nd">@Embedded</span>
                 <span class="kd">private</span> <span class="n">Contact</span> <span class="n">contact</span><span class="o">;</span>
              
                 <span class="o">...</span>
              
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>As an alternative to placing the annotation on an object field, you can apply the <code class="code docutils literal notranslate"><span class="pre">&#64;Embedded</span></code> annotation on a nested class.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Company</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
                 <span class="kd">private</span> <span class="n">Contact</span> <span class="n">contact</span><span class="o">;</span>
              
                 <span class="nd">@Embedded</span>
                 <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Contact</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                    <span class="kd">private</span> <span class="n">String</span> <span class="n">poBox</span><span class="o">;</span>
                    <span class="kd">private</span> <span class="n">String</span> <span class="n">city</span><span class="o">;</span>
                    <span class="kd">private</span> <span class="n">String</span> <span class="n">state</span><span class="o">;</span>
                    <span class="kd">private</span> <span class="n">String</span> <span class="n">zip</span><span class="o">;</span>
                 <span class="o">}</span>
              
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>For more information on embedded objects, see <a class="reference internal" href="relationships.html"><span class="doc">Relationships</span></a>.</p>
              </div>
              <div class="section" id="recordable-fieldinternalnameprefix">
              <span id="internalnameprefix-label"></span><h2>&#64;Recordable.FieldInternalNamePrefix<a class="headerlink" href="#recordable-fieldinternalnameprefix" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field, Class, Method</p>
              <p>Specifies the prefix for the internal names of all fields in the target type. For example, if you have an annotated class…</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="nd">@Recordable.FieldInternalNamePrefix</span><span class="o">(</span><span class="s">&quot;company-&quot;</span><span class="o">)</span>
              </span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Company</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">city</span><span class="o">;</span>
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">zip</span><span class="o">;</span>
              
                 <span class="o">...</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>…the name of each field in a class is prefaced with the specified annotation value, as in this JSON representation of a <code class="code docutils literal notranslate"><span class="pre">Company</span></code> object:</p>
              <div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
              <span class="hll">   <span class="nt">&quot;company-name&quot;</span><span class="p">:</span> <span class="s2">&quot;Acme, Inc.&quot;</span><span class="p">,</span>
              </span><span class="hll">   <span class="nt">&quot;company-city&quot;</span><span class="p">:</span> <span class="s2">&quot;Detroit&quot;</span><span class="p">,</span>
              </span><span class="hll">   <span class="nt">&quot;company-zip&quot;</span><span class="p">:</span> <span class="s2">&quot;20611&quot;</span><span class="p">,</span>
              </span>   <span class="nt">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000015b-2022-d3a6-afdb-aba3d90f0000&quot;</span><span class="p">,</span>
                 <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;0000015b-2015-dfff-abdf-f89d49330000&quot;</span>
              <span class="p">}</span>
              </pre></div>
              </div>
              <p>To query a class using this annotation, you specify the prefixed name of the fields, for example:</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">Query</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">Company</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">where</span><span class="o">(</span><span class="s">&quot;company-city = &#39;Detroit&#39;&quot;</span><span class="o">).</span><span class="na">first</span><span class="o">();</span>
              </pre></div>
              </div>
              <p>This annotation can be used in conjunction with the <a class="reference internal" href="#internal-name-label"><span class="std std-ref">&#64;InternalName</span></a> annotation.</p>
              <div class="admonition note">
              <p class="first admonition-title">Note</p>
              <p class="last">For modifications, always use the <code class="code docutils literal notranslate"><span class="pre">FieldInternalNamePrefix</span></code> annotation to avoid naming conflicts in your data model. For more information, see <a class="reference internal" href="modifications.html#modification-best-practices-label"><span class="std std-ref">Modification Best Practices</span></a>.</p>
              </div>
              <p><strong>See also:</strong></p>
              <ul class="simple">
              <li><a class="reference internal" href="#internal-name-label"><span class="std std-ref">&#64;Recordable.InternalName</span></a></li>
              </ul>
              </div>
              <div class="section" id="recordable-ignored">
              <h2>&#64;Recordable.Ignored<a class="headerlink" href="#recordable-ignored" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field, Method</p>
              <p>Specifies whether the target field or method should be ignored by the frontend of an application (the default is false for fields and true for methods).
              For fields, the <code class="code docutils literal notranslate"><span class="pre">&#64;Ignored</span></code> annotation has a similar impact as the Java <code class="docutils literal notranslate"><span class="pre">transient</span></code> keyword.
              An ignored field is excluded from the <a class="reference external" href="https://artifactory.psdops.com/psddev-releases/com/psddev/dari-db/3.3.607-xe0f27a/dari-db-3.3.607-xe0f27a-javadoc.jar!/com/psddev/dari/db/ObjectType.html">ObjectType</a> defintion for the class, from data validation, and from queries.
              Values of an ignored field are not saved to the database.</p>
              <p>You can also add <code class="code docutils literal notranslate"><span class="pre">&#64;Ignored(false)</span></code> to a method, which creates an <a class="reference external" href="https://artifactory.psdops.com/psddev-releases/com/psddev/dari-db/3.3.607-xe0f27a/dari-db-3.3.607-xe0f27a-javadoc.jar!/com/psddev/dari/db/ObjectMethod.html">ObjectMethod</a>.</p>
              </div>
              <div class="section" id="recordable-indexed">
              <span id="indexed-label"></span><h2>&#64;Recordable.Indexed<a class="headerlink" href="#recordable-indexed" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field, Method</p>
              <p>Specifies whether the target field value is indexed, allowing the field to be queried. Fields can be returned and rendered without indexing, but to query on a field, it must be indexed.</p>
              <div class="admonition note">
              <p class="first admonition-title">Note</p>
              <p class="last">Apply the <code class="code docutils literal notranslate"><span class="pre">&#64;Indexed</span></code> annotation only to fields likely to be queried. Adding this annotation to all the fields on every class potentially creates unnecessary rows in the underlying database, and can lead to poor performance in systems with large amounts of data.</p>
              </div>
              <p>In the example below, the <code class="code docutils literal notranslate"><span class="pre">&#64;Indexed</span></code> annotation is applied to the <code class="docutils literal notranslate"><span class="pre">userName</span></code> field.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="kd">extends</span> <span class="n">Record</span>
              <span class="o">{</span>
                     <span class="nd">@Indexed</span>
                     <span class="kd">private</span> <span class="n">String</span> <span class="n">userName</span><span class="o">;</span>
                 <span class="o">...</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>Indexing this field allows <code class="code docutils literal notranslate"><span class="pre">User</span></code> instances to be queried for specified names.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">Query</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">User</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">where</span><span class="o">(</span><span class="s">&quot;userName = &#39;Curly&#39;&quot;</span><span class="o">.</span><span class="na">trim</span><span class="o">()).</span><span class="na">first</span><span class="o">();</span>
              </pre></div>
              </div>
              <p>You can apply the <code class="code docutils literal notranslate"><span class="pre">&#64;Indexed</span></code> annotation to getter methods or any method that returns a value. Indexing methods provides a means to index and query values that are not directly set by users, but are generated from other values stored in an object. Applying the <code class="code docutils literal notranslate"><span class="pre">&#64;Indexed</span></code> annotation to a method creates an <code class="code docutils literal notranslate"><span class="pre">ObjectMethod</span></code>.</p>
              <p>For more information on indexing, see <a class="reference internal" href="indexes.html"><span class="doc">Indexes</span></a>. To reindex existing objects, see <a class="reference internal" href="../debugging/db-bulk-operations.html"><span class="doc">Database Bulk Operations</span></a>. To change the default time interval when Dari updates method indexes, see <a class="reference internal" href="#recalculate-label"><span class="std std-ref">&#64;Recordable.Recalculate</span></a>.</p>
              <div class="section" id="optional-elements">
              <h3>Optional Elements<a class="headerlink" href="#optional-elements" title="Permalink to this headline">¶</a></h3>
              <dl class="docutils">
              <dt><strong>caseSensitive</strong></dt>
              <dd><div class="first last line-block">
              <div class="line">Default=false</div>
              <div class="line">If true, only case-sensitive searches are performed on the field.</div>
              </div>
              </dd>
              <dt><strong>unique</strong></dt>
              <dd><div class="first last line-block">
              <div class="line">Default=false</div>
              <div class="line">If true, only a unique value can be set on the field.</div>
              </div>
              </dd>
              <dt><strong>visibility</strong></dt>
              <dd><div class="first line-block">
              <div class="line">Default=false</div>
              <div class="line">If true, an object’s visibility in a query is determined by whether its visibility-indexed fields are set to null. The <code class="code docutils literal notranslate"><span class="pre">&#64;Indexed(visibility=true)</span></code> annotation is typically applied to fields of type <code class="code docutils literal notranslate"><span class="pre">Boolean</span></code>. In the following code snippet, <code class="docutils literal notranslate"><span class="pre">status</span></code> is a visibility-indexed field.</div>
              </div>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Application</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                 <span class="nd">@Indexed</span><span class="o">(</span><span class="n">visibility</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
                 <span class="kd">private</span> <span class="n">Boolean</span> <span class="n">status</span><span class="o">;</span> <span class="c1">// set to null by default</span>
              
                 <span class="o">...</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>If any visibility-indexed field of an object is set to a non-null value, then that object is not returned in a query for published objects. If all of the visibility-indexed fields of the object are null, then that object is returned in a query.</p>
              <p class="last">For more information, see <a class="reference internal" href="indexes.html#visibility-label"><span class="std std-ref">indexes</span></a>.</p>
              </dd>
              </dl>
              </div>
              </div>
              <div class="section" id="recordable-internalname">
              <span id="internal-name-label"></span><h2>&#64;Recordable.InternalName<a class="headerlink" href="#recordable-internalname" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field, Method, Class</p>
              <p>Specifies the identifier Dari uses to store the annotated item in its internal representation.</p>
              <p>Without this annotation, Dari stores a class and its fields using native Java identifiers as described in the following example.</p>
              <div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
               2
               3
               4
               5
               6
               7
               8
               9
              10
              11
              12
              13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">content.blog</span><span class="o">;</span>
              
              <span class="kn">import</span> <span class="nn">com.psddev.cms.db.Content</span><span class="o">;</span>
              
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Author</span> <span class="kd">extends</span> <span class="n">Content</span> <span class="o">{</span>
              
                  <span class="kd">private</span> <span class="n">String</span> <span class="n">lastName</span><span class="o">;</span>
              
                  <span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="o">;</span>
              
                  <span class="cm">/* Getters and setters */</span>
              
              <span class="o">}</span>
              </pre></div>
              </td></tr></table></div>
              <p>In the previous snippet—</p>
              <ul class="simple">
              <li>Line 1 declares the package.</li>
              <li>Line 5 declares the class.</li>
              <li>Lines 7–9 declare fields.</li>
              </ul>
              <p>Dari’s JSON representation of this class uses the native Java identifiers.</p>
              <div class="highlight-json notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
               2
               3
               4
               5
               6
               7
               8
               9
              10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Author&quot;</span><span class="p">,</span>
                <span class="nt">&quot;internalName&quot;</span><span class="p">:</span> <span class="s2">&quot;content.blog.Author&quot;</span><span class="p">,</span>
                <span class="nt">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
                  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;lastName&quot;</span>
                <span class="p">},</span> <span class="p">{</span>
                  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;firstName&quot;</span>
                <span class="p">}</span> <span class="p">],</span>
                <span class="nt">&quot;java.objectClass&quot;</span><span class="p">:</span> <span class="s2">&quot;content.blog.Author&quot;</span>
              <span class="p">}</span>
              </pre></div>
              </td></tr></table></div>
              <p>In the previous snippet—</p>
              <ul class="simple">
              <li>Line 2 shows the class’s name.</li>
              <li>Line 3 shows the class’s internal name constructed as a standard fully qualified class name.</li>
              <li>Lines 5 and 7 show the class’s fields.</li>
              <li>Line 9 shows the class’s native fully qualified Java name.</li>
              </ul>
              <p>The following snippet adds <code class="code docutils literal notranslate"><span class="pre">&#64;Recordable.InternalName</span></code> annotations to the class name and a field.</p>
              <div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
               2
               3
               4
               5
               6
               7
               8
               9
              10
              11
              12
              13
              14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">content.blog</span><span class="o">;</span>
              
              <span class="kn">import</span> <span class="nn">com.psddev.cms.db.Content</span><span class="o">;</span>
              <span class="kn">import</span> <span class="nn">com.psddev.dari.db.Recordable</span><span class="o">;</span>
              
              <span class="nd">@Recordable.InternalName</span><span class="o">(</span><span class="s">&quot;romance&quot;</span><span class="o">)</span>
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Author</span> <span class="kd">extends</span> <span class="n">Content</span> <span class="o">{</span>
              
                  <span class="nd">@Recordable.InternalName</span><span class="o">(</span><span class="s">&quot;pseudonym&quot;</span><span class="o">)</span>
                  <span class="kd">private</span> <span class="n">String</span> <span class="n">lastName</span><span class="o">;</span>
              
                  <span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="o">;</span>
              
              <span class="o">}</span>
              </pre></div>
              </td></tr></table></div>
              <p>In the previous snippet, lines 6 and 9 apply the annotation <code class="code docutils literal notranslate"><span class="pre">&#64;Recordable.InternalName</span></code> to the class’s name and one of its fields. As a result, Dari adjusts its internal representation of the class.</p>
              <div class="highlight-json notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
               2
               3
               4
               5
               6
               7
               8
               9
              10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Author&quot;</span><span class="p">,</span>
                <span class="nt">&quot;internalName&quot;</span><span class="p">:</span> <span class="s2">&quot;romance&quot;</span><span class="p">,</span>
                <span class="nt">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
                  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;pseudonym&quot;</span>
                <span class="p">},</span> <span class="p">{</span>
                  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;firstName&quot;</span>
                <span class="p">}</span> <span class="p">],</span>
                <span class="nt">&quot;java.objectClass&quot;</span><span class="p">:</span> <span class="s2">&quot;content.blog.Author&quot;</span>
              <span class="p">}</span>
              </pre></div>
              </td></tr></table></div>
              <p>In the previous snippet—</p>
              <ul class="simple">
              <li>Line 2 shows the class’s name.</li>
              <li>Line 3 shows the class’s internal name constructed from the value of the annotation <code class="code docutils literal notranslate"><span class="pre">&#64;Recordable.InternalName</span></code> at the class level.</li>
              <li>Lines 5 shows the field’s internal name constructed from the value of the annotation <code class="code docutils literal notranslate"><span class="pre">&#64;Recordable.InternalName</span></code> at the field level.</li>
              <li>Line 9 shows the class’s native Java fully qualified name.</li>
              </ul>
              <p>Note that if you use <code class="code docutils literal notranslate"><span class="pre">&#64;InternalName</span></code> on an indexed field, you must use the internal name to query the field.</p>
              <p>You can also annotate indexed methods with <code class="code docutils literal notranslate"><span class="pre">&#64;InternalName</span></code>.</p>
              <p>In the following example, the <code class="docutils literal notranslate"><span class="pre">getAddress</span></code> method is indexed in the <code class="code docutils literal notranslate"><span class="pre">Company</span></code> class. When a <code class="code docutils literal notranslate"><span class="pre">Company</span></code> object is created, Dari automatically executes the method and saves the full address value in the database.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
              
              <span class="nd">@Indexed</span>
              <span class="hll"><span class="nd">@InternalName</span><span class="o">(</span><span class="s">&quot;fullAddress&quot;</span><span class="o">)</span>
              </span><span class="kd">public</span> <span class="n">String</span> <span class="nf">getAddress</span><span class="o">()</span> <span class="o">{</span>
                 <span class="k">return</span> <span class="o">(</span><span class="n">getCity</span><span class="o">()+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">getZip</span><span class="o">());</span>
               <span class="o">}</span>
              </pre></div>
              </div>
              <p>To query an indexed method that is annotated with an internal name, you must specify the internal name of the method to test field values. For example, to search for a <code class="code docutils literal notranslate"><span class="pre">Company</span></code> object where the full address is “Detroit 48236”, you would specify the method’s internal name:</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">Query</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">Company</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">where</span><span class="o">(</span><span class="s">&quot;fullAddress = &#39;Detroit 48236&#39;&quot;</span><span class="o">).</span><span class="na">first</span><span class="o">();</span>
              </pre></div>
              </div>
              <p>The strings used with <code class="code docutils literal notranslate"><span class="pre">&#64;InternalName</span></code> on methods and fields within a class must be unique, otherwise the application fails to load.</p>
              <p><strong>See also:</strong></p>
              <ul class="simple">
              <li><a class="reference internal" href="indexes.html"><span class="doc">Indexes</span></a></li>
              <li><a class="reference internal" href="model.html#objecttype-label"><span class="std std-ref">Object Type Definitions</span></a></li>
              </ul>
              </div>
              <div class="section" id="recordable-junctionfield">
              <h2>&#64;Recordable.JunctionField<a class="headerlink" href="#recordable-junctionfield" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field</p>
              <p>Specifies the name of the field in a junction query to be used to populate the target field. This annotation enhances database performance for retrieval of many objects that are contained within another object.</p>
              <p>In the following example, a <code class="code docutils literal notranslate"><span class="pre">Season</span></code> object potentially references many <code class="code docutils literal notranslate"><span class="pre">Episode</span></code> objects. Therefore, a junction field is added to the <code class="code docutils literal notranslate"><span class="pre">Episode</span></code> class, and, in the <code class="code docutils literal notranslate"><span class="pre">Season</span></code> class, a <code class="code docutils literal notranslate"><span class="pre">&#64;JunctionField</span></code> annotation references the junction field in <code class="code docutils literal notranslate"><span class="pre">Episode</span></code>. This allows the population of a list of episodes for a season by having each <code class="code docutils literal notranslate"><span class="pre">Episode</span></code> object contain a reference to the <code class="code docutils literal notranslate"><span class="pre">Season</span></code> it is in.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Season:</span>
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Season</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                <span class="nd">@Indexed</span>
                <span class="kd">private</span> <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
              
              <span class="hll">  <span class="nd">@JunctionField</span><span class="o">(</span><span class="s">&quot;season&quot;</span><span class="o">)</span>
              </span><span class="hll">  <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Episode</span><span class="o">&gt;</span> <span class="n">episodes</span><span class="o">;</span>
              </span>
                <span class="o">...</span>
              <span class="o">}</span>
              
              <span class="c1">// Episode:</span>
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Episode</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                <span class="nd">@Indexed</span>
                <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
              
              <span class="hll">  <span class="kd">private</span> <span class="kt">int</span> <span class="n">index</span><span class="o">;</span>
              </span>
                <span class="nd">@Required</span>
                <span class="kd">private</span> <span class="n">Season</span> <span class="n">season</span><span class="o">;</span>
              
                <span class="o">...</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-junctionpositionfield">
              <h2>&#64;Recordable.JunctionPositionField<a class="headerlink" href="#recordable-junctionpositionfield" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field</p>
              <p>Enables ordering of <code class="code docutils literal notranslate"><span class="pre">&#64;JunctionField</span></code>. In the following code example, the <code class="code docutils literal notranslate"><span class="pre">&#64;JunctionPositionField</span></code> annotation is added. It targets the <code class="docutils literal notranslate"><span class="pre">index</span></code> field in <code class="code docutils literal notranslate"><span class="pre">Episode</span></code>, which is used to number <code class="code docutils literal notranslate"><span class="pre">Episode</span></code> objects. Retrieved <code class="code docutils literal notranslate"><span class="pre">Episode</span></code> objects are listed in the order of their <code class="docutils literal notranslate"><span class="pre">index</span></code> value.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Season:</span>
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Season</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                <span class="nd">@Indexed</span>
                <span class="kd">private</span> <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
              
                <span class="nd">@JunctionField</span><span class="o">(</span><span class="s">&quot;season&quot;</span><span class="o">)</span>
              <span class="hll">  <span class="nd">@JunctionPositionField</span><span class="o">(</span><span class="s">&quot;index&quot;</span><span class="o">)</span>
              </span>  <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Episode</span><span class="o">&gt;</span> <span class="n">episodes</span><span class="o">;</span>
              
                <span class="o">...</span>
              <span class="o">}</span>
              
              <span class="c1">// Episode:</span>
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Episode</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                <span class="nd">@Indexed</span>
                <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
              
                <span class="kd">private</span> <span class="kt">int</span> <span class="n">index</span><span class="o">;</span>
              
                <span class="nd">@Required</span>
                <span class="kd">private</span> <span class="n">Season</span> <span class="n">season</span><span class="o">;</span>
              
                <span class="o">...</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-labelfields">
              <span id="labelfields-label"></span><h2>&#64;Recordable.LabelFields<a class="headerlink" href="#recordable-labelfields" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Class</p>
              <p>Specifies one or more field names that are used to construct a displayable label for retrieved objects. By default, Dari uses the value of the first field in the class. For more information, see <a class="reference internal" href="object-labels.html"><span class="doc">Object Labels</span></a>.</p>
              </div>
              <div class="section" id="recordable-maximum">
              <span id="maximum-label"></span><h2>&#64;Recordable.Maximum<a class="headerlink" href="#recordable-maximum" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field</p>
              <p>Specifies either the maximum numeric value or string length of the target field. For example, the <code class="docutils literal notranslate"><span class="pre">rate</span></code> field can have a value no greater than 10%.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Interest</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                 <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">dealerCharged</span><span class="o">;</span>
              
                 <span class="nd">@Maximum</span><span class="o">(</span><span class="mf">.10</span><span class="o">)</span>
                 <span class="kd">private</span> <span class="kt">double</span> <span class="n">rate</span><span class="o">;</span>
              
                 <span class="o">...</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>This annotation can also be used with <a class="reference internal" href="#minimum-label"><span class="std std-ref">&#64;Recordable.Minimum</span></a> and <a class="reference internal" href="#step-label"><span class="std std-ref">&#64;Recordable.Step</span></a>.</p>
              </div>
              <div class="section" id="recordable-mimetypes">
              <span id="mimetypes-label"></span><h2>&#64;Recordable.MimeTypes<a class="headerlink" href="#recordable-mimetypes" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field</p>
              <p>Specifies the valid MIME type for the target <a class="reference internal" href="fields.html#storageitem-label"><span class="std std-ref">StorageItem</span></a> field using the <a class="reference external" href="https://artifactory.psdops.com/psddev-releases/com/psddev/dari-util/3.3.607-xe0f27a/dari-util-3.3.607-xe0f27a-javadoc.jar!/com/psddev/dari/util/SparseSet.html">SparseSet</a> representation. For example, to specify that the <code class="code docutils literal notranslate"><span class="pre">StorageItem</span></code> field must be a <code class="docutils literal notranslate"><span class="pre">pdf</span></code> or <code class="docutils literal notranslate"><span class="pre">image</span></code> type:</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@MimeTypes</span><span class="o">(</span><span class="s">&quot;+application/pdf +image/&quot;</span><span class="o">)</span>
              <span class="kd">private</span> <span class="n">StorageItem</span> <span class="n">file</span><span class="o">;</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-minimum">
              <span id="minimum-label"></span><h2>&#64;Recordable.Minimum<a class="headerlink" href="#recordable-minimum" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field</p>
              <p>Specifies either the minimum numeric value or string length of the target field. For example, the <code class="docutils literal notranslate"><span class="pre">rate</span></code> field can have a value no less than 1%.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Interest</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                 <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">dealerCharged</span><span class="o">;</span>
              
                 <span class="nd">@Maximum</span><span class="o">(</span><span class="mf">.10</span><span class="o">)</span>
                 <span class="nd">@Minimum</span><span class="o">(</span><span class="mf">.01</span><span class="o">)</span>
                 <span class="kd">private</span> <span class="kt">double</span> <span class="n">rate</span><span class="o">;</span>
              
                 <span class="o">...</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>This annotation can also be used with <a class="reference internal" href="#maximum-label"><span class="std std-ref">&#64;Recordable.Maximum</span></a> and <a class="reference internal" href="#step-label"><span class="std std-ref">&#64;Recordable.Step</span></a>.</p>
              <div class="admonition note">
              <p class="first admonition-title">Note</p>
              <p class="last">Minimum or maximum field validation is only enforced on non-null values. If you want to require a value, also use the <code class="code docutils literal notranslate"><span class="pre">&#64;Required</span></code> annotation.</p>
              </div>
              </div>
              <div class="section" id="recordable-previewfield">
              <span id="preview-label"></span><h2>&#64;Recordable.PreviewField<a class="headerlink" href="#recordable-previewfield" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Class</p>
              <p>Indicates the <a class="reference internal" href="fields.html#storageitem-label"><span class="std std-ref">StorageItem field</span></a> that should be used by Brightspot to preview a <code class="code docutils literal notranslate"><span class="pre">Record</span></code> instance. The <code class="code docutils literal notranslate"><span class="pre">StorageItem</span></code> to use for preview can then be accessed via <a class="reference external" href="https://github.com/perfectsense/dari/blob/e0c24370d258ed127638805f345ff8854bca87bb/db/src/main/java/com/psddev/dari/db/State.java#L1288">State#getPreview</a>. The annotation is typically used on image or video classes.</p>
              <p>For example, <code class="code docutils literal notranslate"><span class="pre">&#64;PreviewField</span></code> is used on the <code class="code docutils literal notranslate"><span class="pre">Image</span></code> class, specifying the <code class="docutils literal notranslate"><span class="pre">file</span></code> field to use in Brightspot preview:</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="nd">@Recordable.PreviewField</span><span class="o">(</span><span class="s">&quot;file&quot;</span><span class="o">)</span>
              </span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Image</span> <span class="kd">extends</span> <span class="n">Content</span> <span class="o">{</span>
              
                <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
              <span class="hll">  <span class="kd">private</span> <span class="n">StorageItem</span> <span class="n">file</span><span class="o">;</span>
              </span>  <span class="kd">private</span> <span class="n">String</span> <span class="n">altText</span><span class="o">;</span>
              
                <span class="o">...</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-recalculate">
              <span id="recalculate-label"></span><h2>&#64;Recordable.Recalculate<a class="headerlink" href="#recordable-recalculate" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Method</p>
              <p>Specifies how often the Dari background task, <a class="reference external" href="https://artifactory.psdops.com/psddev-releases/com/psddev/dari-db/3.3.607-xe0f27a/dari-db-3.3.607-xe0f27a-javadoc.jar!/com/psddev/dari/db/RecalculationTask.html">RecalculationTask</a>, recalculates an indexed method and updates the method index with the returned values. An indexed method is one that returns a calculated value (not one entered by a user). Settings are based on the <a class="reference external" href="https://artifactory.psdops.com/psddev-releases/com/psddev/dari-db/3.3.607-xe0f27a/dari-db-3.3.607-xe0f27a-javadoc.jar!/com/psddev/dari/db/RecalculationDelay.html">com.psddev.dari.db.RecalculationDelay</a> interface. If you do not apply this annotation, Dari recalculates the method only when an object containing the method is created or saved. If you apply this annotation without parameters, the default setting for an indexed method is <code class="code docutils literal notranslate"><span class="pre">RecalculationDelay.Hour</span></code>. That is, Dari recalculates the return value of the method and updates the index in hourly intervals. Alternatively, you can change the delay value of the annotation.</p>
              <p>In the following example, the <code class="docutils literal notranslate"><span class="pre">getFullName</span></code> method is recalculated in hourly intervals.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span>   <span class="c1">// Creates a full name value from the firstName and lastName values.</span>
                 <span class="nd">@Indexed</span>
                 <span class="nd">@Recalculate</span>
                 <span class="kd">public</span> <span class="n">String</span> <span class="nf">getFullName</span><span class="o">()</span> <span class="o">{</span>
                   <span class="k">return</span> <span class="o">(</span><span class="n">site</span><span class="o">.</span><span class="na">getFirstName</span><span class="o">()+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">site</span><span class="o">.</span><span class="na">getLastName</span><span class="o">());</span>
                 <span class="o">}</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>For more information about indexing, see <a class="reference internal" href="#indexed-label"><span class="std std-ref">&#64;Recordable.Indexed</span></a>. For configuring the Dari Recalculation task, see <a class="reference internal" href="../tasks/recalculation-task.html"><span class="doc">Recalculation Task</span></a>.</p>
              </div>
              <div class="section" id="recordable-regex">
              <h2>&#64;Recordable.Regex<a class="headerlink" href="#recordable-regex" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field</p>
              <p>This annotation specifies a <a class="reference external" href="https://regexr.com/">regular expression</a> pattern for a target string field. The input value on the field must match the pattern; otherwise, Brightspot displays an error. The regular expression pattern is set on the required <code class="docutils literal notranslate"><span class="pre">value</span></code> element. Optionally, you can include the <code class="docutils literal notranslate"><span class="pre">validationMessage</span></code> element to specify a custom error message in Brightspot.</p>
              <p>In the following code snippet, the <code class="code docutils literal notranslate"><span class="pre">Regex</span></code> annotation specifies the required pattern for the <code class="docutils literal notranslate"><span class="pre">email</span></code> field. The <code class="docutils literal notranslate"><span class="pre">validationMessage</span></code> element is set to the Brightspot error message.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Author</span> <span class="kd">extends</span> <span class="n">Content</span>
              <span class="o">{</span>
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
              
              <span class="hll">   <span class="nd">@Recordable.Regex</span><span class="o">(</span><span class="n">value</span><span class="o">=</span><span class="s">&quot;.+\\@.+\\..+&quot;</span><span class="o">,</span> <span class="n">validationMessage</span><span class="o">=</span><span class="s">&quot;Use email format &#39;myemail@address.com&#39;&quot;</span><span class="o">)</span>
              </span><span class="hll">   <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="o">;</span>
              </span>
                 <span class="c1">//getters and setters</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>If a user enters a non-compliant string on the <code class="docutils literal notranslate"><span class="pre">email</span></code> field, Brightspot displays the message set on the <code class="docutils literal notranslate"><span class="pre">validationMessage</span></code> element.</p>
              <img alt="../../_images/regex-validation-message.png" src="../../_images/regex-validation-message.png" />
              </div>
              <div class="section" id="recordable-required">
              <span id="required-label"></span><h2>&#64;Recordable.Required<a class="headerlink" href="#recordable-required" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field</p>
              <p>Specifies whether the target field value is required. For example, the <code class="docutils literal notranslate"><span class="pre">activityUser</span></code> and <code class="docutils literal notranslate"><span class="pre">project</span></code> fields are  required for an <code class="code docutils literal notranslate"><span class="pre">Activity</span></code>.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Activity</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                 <span class="nd">@Indexed</span>
                 <span class="kd">private</span> <span class="n">Date</span> <span class="n">activityDate</span><span class="o">;</span>
              
              <span class="hll">   <span class="nd">@Required</span>
              </span><span class="hll">   <span class="kd">private</span> <span class="n">User</span> <span class="n">activityUser</span><span class="o">;</span>
              </span><span class="hll">
              </span><span class="hll">   <span class="nd">@Required</span>
              </span><span class="hll">   <span class="kd">private</span> <span class="n">Project</span> <span class="n">project</span><span class="o">;</span>
              </span>
                 <span class="o">...</span>
               <span class="o">}</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-sourcedatabaseclass">
              <span id="sourcedatabaseclass-label"></span><h2>&#64;Recordable.SourceDatabaseClass<a class="headerlink" href="#recordable-sourcedatabaseclass" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Class</p>
              <p>Specifies the source database class for the target type. The annotation takes a value of an implementing class of <a class="reference external" href="https://artifactory.psdops.com/psddev-releases/com/psddev/dari-db/3.3.607-xe0f27a/dari-db-3.3.607-xe0f27a-javadoc.jar!/com/psddev/dari/db/Database.html">com.psddev.dari.db.Database</a>.</p>
              <p>For example, you might have a large dataset that you don’t want to be included in your default MySQL database, so you specify ElasticSearch storage:</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@SourceDatabaseClass</span><span class="o">(</span><span class="n">com</span><span class="o">.</span><span class="na">psddev</span><span class="o">.</span><span class="na">dari</span><span class="o">.</span><span class="na">elasticsearch</span><span class="o">.</span><span class="na">ElasticsearchDatabase</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
              <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Order</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                 <span class="o">...</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-sourcedatabasename">
              <h2>&#64;Recordable.SourceDatabaseName<a class="headerlink" href="#recordable-sourcedatabasename" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Class</p>
              <p>Specifies the source database name for the target type. This annotation is an alternative to <code class="code docutils literal notranslate"><span class="pre">&#64;SourceDatabaseClass</span></code>. Instead of specifying the database class, you specify the name of the database as configured in the Tomcat <code class="code docutils literal notranslate"><span class="pre">context.xml</span></code> file:</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@SourceDatabaseName</span><span class="o">(</span><span class="s">&quot;OrderProcessing&quot;</span><span class="o">)</span>
              <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Order</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                 <span class="o">...</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-step">
              <span id="step-label"></span><h2>&#64;Recordable.Step<a class="headerlink" href="#recordable-step" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field</p>
              <p>Specifies the incremental step between the minimum and the maximum that the target field must match. The <code class="code docutils literal notranslate"><span class="pre">&#64;Step</span></code> annotation must be used with the <code class="code docutils literal notranslate"><span class="pre">&#64;Minimum</span></code> and <code class="code docutils literal notranslate"><span class="pre">&#64;Maximum</span></code> annotations.</p>
              <p>Based on the following annotations, the <code class="docutils literal notranslate"><span class="pre">rate</span></code> field accepts a value range of 1 to 10 percent in half-percent increments.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Interest</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                 <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">dealerCharged</span><span class="o">;</span>
              
                 <span class="nd">@Minimum</span><span class="o">(</span><span class="mf">.01</span><span class="o">)</span>
                 <span class="nd">@Maximum</span><span class="o">(</span><span class="mf">.10</span><span class="o">)</span>
                 <span class="nd">@Step</span><span class="o">(</span><span class="mf">.005</span><span class="o">)</span>
                 <span class="kd">private</span> <span class="kt">double</span> <span class="n">rate</span><span class="o">;</span>
              
                 <span class="o">...</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-typeid">
              <h2>&#64;Recordable.TypeId<a class="headerlink" href="#recordable-typeid" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Class</p>
              <p>Forces the type ID to the specified value instead of automatic generation of the ID. A type ID conflict with another class has no impact.</p>
              <p>This annotation is typically used to facilitate code refactoring, allowing you to maintain existing type IDs for classes that you relocate to different packages. For example, the following snippet defines a class <code class="code docutils literal notranslate"><span class="pre">Article</span></code> prior to refactoring.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">content.article</span><span class="o">;</span>
              
              <span class="kn">import</span> <span class="nn">com.psddev.cms.db.Content</span><span class="o">;</span>
              
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Article</span> <span class="kd">extends</span> <span class="n">Content</span> <span class="o">{</span>
              
                  <span class="cm">/* Fields, getters, setters */</span>
              
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>Dari’s internal representation of the class is as follows:</p>
              <div class="highlight-json notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
              2
              3
              4
              5
              6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Article&quot;</span><span class="p">,</span>
                <span class="nt">&quot;internalName&quot;</span><span class="p">:</span> <span class="s2">&quot;content.article.Article&quot;</span><span class="p">,</span>
                <span class="nt">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;a3489571-fd7e-3ca4-b850-61909ef172cd&quot;</span><span class="p">,</span>
                <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;982a8b2a-7600-3bb0-ae68-740f77cd85d3&quot;</span>
              <span class="p">}</span>
              </pre></div>
              </td></tr></table></div>
              <p>In the previous snippet—</p>
              <ul class="simple">
              <li>Line 2 shows the class’s name.</li>
              <li>Line 3 shows the class’s fully qualified name.</li>
              <li>Line 4 shows the class’s instance ID.</li>
              <li>Line 5 shows the class’s type ID.</li>
              </ul>
              <p>As your project evolves, you decide to create a new content type <code class="code docutils literal notranslate"><span class="pre">Blog</span></code> in a different package that is identical to the content type <code class="code docutils literal notranslate"><span class="pre">Article</span></code>. Using the annotation <code class="code docutils literal notranslate"><span class="pre">&#64;Recordable.TypeId</span></code> you can force Dari to store the blog as an article.</p>
              <div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
               2
               3
               4
               5
               6
               7
               8
               9
              10
              11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">content.blog</span><span class="o">;</span>
              
              <span class="kn">import</span> <span class="nn">com.psddev.cms.db.Content</span><span class="o">;</span>
              <span class="kn">import</span> <span class="nn">com.psddev.dari.db.Recordable</span><span class="o">;</span>
              
              <span class="nd">@Recordable.TypeId</span><span class="o">(</span><span class="s">&quot;982a8b2a-7600-3bb0-ae68-740f77cd85d3&quot;</span><span class="o">)</span>
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Blog</span> <span class="kd">extends</span> <span class="n">Content</span>  <span class="o">{</span>
              
                  <span class="cm">/* Fields, getters, setters */</span>
              
              <span class="o">}</span>
              </pre></div>
              </td></tr></table></div>
              <p>In the previous snippet, line 6 applies the annotation <code class="code docutils literal notranslate"><span class="pre">&#64;Recordable.TypeId</span></code> to assigned the article’s type ID to the blog. Dari’s internal representation for the blog reflects the internal name and type ID for Article.</p>
              <div class="highlight-json notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
              2
              3
              4
              5
              6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Article&quot;</span><span class="p">,</span>
                <span class="nt">&quot;internalName&quot;</span><span class="p">:</span> <span class="s2">&quot;content.blog.Article&quot;</span><span class="p">,</span>
                <span class="nt">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;daba47fb-df6e-3e05-bfa3-d7d943cc346d&quot;</span><span class="p">,</span>
                <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;982a8b2a-7600-3bb0-ae68-740f77cd85d3&quot;</span>
              <span class="p">}</span>
              </pre></div>
              </td></tr></table></div>
              <p>In the previous snippet—</p>
              <ul class="simple">
              <li>Lines 2 and 5 are identical to the values for the class <code class="code docutils literal notranslate"><span class="pre">Article</span></code>.</li>
              <li>Line 3 provides the class’s fully qualified name.</li>
              <li>Line 4 shows the class’s instance ID.</li>
              </ul>
              <p><strong>See also:</strong></p>
              <ul class="simple">
              <li><a class="reference internal" href="#internalnameprefix-label"><span class="std std-ref">&#64;Recordable.FieldInternalNamePrefix</span></a></li>
              <li><a class="reference internal" href="model.html#objecttype-label"><span class="std std-ref">Object Type Definitions</span></a></li>
              </ul>
              </div>
              <div class="section" id="recordable-typepostprocessorclasses">
              <h2>&#64;Recordable.TypePostProcessorClasses<a class="headerlink" href="#recordable-typepostprocessorclasses" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Class</p>
              <p>Specifies an array of processor classes to run after the type is initialized. When an instance of the target class is created, your implementation of <a class="reference external" href="https://artifactory.psdops.com/psddev-releases/com/psddev/dari-db/3.3.607-xe0f27a/dari-db-3.3.607-xe0f27a-javadoc.jar!/com/psddev/dari/db/ObjectType.PostProcessor.html">ObjectType.PostProcessor</a> executes.</p>
              </div>
              <div class="section" id="recordable-types">
              <h2>&#64;Recordable.Types<a class="headerlink" href="#recordable-types" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field</p>
              <p>Specifies the valid class types for the target field value. In the example below, only <code class="code docutils literal notranslate"><span class="pre">Image</span></code> and <code class="code docutils literal notranslate"><span class="pre">Video</span></code> types, which derive from <code class="code docutils literal notranslate"><span class="pre">Media</span></code>, can be added to the list of <code class="docutils literal notranslate"><span class="pre">items</span></code>.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Gallery</span> <span class="kd">extends</span> <span class="n">Content</span> <span class="o">{</span>
              
              <span class="hll">  <span class="nd">@Types</span><span class="o">(</span> <span class="o">{</span><span class="n">Image</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">Video</span><span class="o">.</span><span class="na">class</span><span class="o">}</span> <span class="o">)</span>
              </span><span class="hll">  <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Media</span><span class="o">&gt;</span> <span class="n">items</span><span class="o">;</span>
              </span><span class="o">}</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-typesexclude">
              <h2>&#64;Recordable.TypesExclude<a class="headerlink" href="#recordable-typesexclude" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field</p>
              <p>Specifies the class types to be excluded for the target field value. In the example below, all types that derive from <code class="code docutils literal notranslate"><span class="pre">Promotable</span></code> can be set on the <code class="docutils literal notranslate"><span class="pre">item</span></code> field except for <code class="code docutils literal notranslate"><span class="pre">Image</span></code>.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Promo</span> <span class="kd">extends</span> <span class="n">Content</span> <span class="o">{</span>
              
              <span class="hll">  <span class="nd">@TypesExclude</span><span class="o">(</span> <span class="o">{</span><span class="n">Image</span><span class="o">.</span><span class="na">class</span><span class="o">}</span> <span class="o">)</span>
              </span><span class="hll">  <span class="kd">private</span> <span class="n">Promotable</span> <span class="n">item</span><span class="o">;</span>
              </span><span class="o">}</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-values">
              <h2>&#64;Recordable.Values<a class="headerlink" href="#recordable-values" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field</p>
              <p>Specifies the valid values for the target field. In the example below, only one of the listed colors can be set on the <code class="docutils literal notranslate"><span class="pre">teamColor</span></code> field.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Team</span> <span class="kd">extends</span> <span class="n">Content</span> <span class="o">{</span>
              
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">teamName</span><span class="o">;</span>
              
              <span class="hll">   <span class="nd">@Values</span><span class="o">({</span><span class="s">&quot;red&quot;</span><span class="o">,</span> <span class="s">&quot;blue&quot;</span><span class="o">,</span> <span class="s">&quot;yellow&quot;</span><span class="o">,</span> <span class="s">&quot;green&quot;</span><span class="o">})</span>
              </span>   <span class="kd">private</span> <span class="n">String</span> <span class="n">teamColor</span><span class="o">;</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="recordable-where">
              <span id="where-label"></span><h2>&#64;Recordable.Where<a class="headerlink" href="#recordable-where" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Field</p>
              <p>Allows you to specify a predicate for a reference field of type extending from <code class="code docutils literal notranslate"><span class="pre">Record</span></code>. At validation time, the predicate is evaluated against the value. If the value does not match the predicate, a validation error is thrown. (For information about validation time and when it occurs, see <a class="reference internal" href="persistence.html#save-lifecycle"><span class="std std-ref">Save Lifecycle</span></a>.)</p>
              <p>The following example illustrates how to use <code class="code docutils literal notranslate"><span class="pre">&#64;Where</span></code> for data validation. In this example, when creating a new article, Dari checks that the author associated with the article has an expertise of <code class="code docutils literal notranslate"><span class="pre">Lifestyle</span></code>.</p>
              <div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
               2
               3
               4
               5
               6
               7
               8
               9
              10
              11
              12
              13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">content.article</span><span class="o">;</span>
              
              <span class="kn">import</span> <span class="nn">com.psddev.cms.db.Content</span><span class="o">;</span>
              <span class="kn">import</span> <span class="nn">com.psddev.cms.db.Directory</span><span class="o">;</span>
              
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Author</span> <span class="kd">extends</span> <span class="n">Content</span> <span class="o">{</span>
              
                  <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
              
                  <span class="nd">@Indexed</span>
                  <span class="kd">private</span> <span class="n">String</span> <span class="n">expertise</span><span class="o">;</span>
              
              <span class="o">}</span>
              </pre></div>
              </td></tr></table></div>
              <p>In the previous snippet—</p>
              <ul class="simple">
              <li>Line 11 declares a property <code class="code docutils literal notranslate"><span class="pre">expertise</span></code> associated with an <code class="code docutils literal notranslate"><span class="pre">Author</span></code>.</li>
              <li>Line 10 applies the annotation <a class="reference internal" href="#indexed-label"><span class="std std-ref">&#64;Recordable.Indexed</span></a>, allowing Dari to search on the property <code class="code docutils literal notranslate"><span class="pre">expertise</span></code>.</li>
              </ul>
              <div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
               2
               3
               4
               5
               6
               7
               8
               9
              10
              11
              12
              13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">content.article</span><span class="o">;</span>
              
              <span class="kn">import</span> <span class="nn">com.psddev.cms.db.Content</span><span class="o">;</span>
              <span class="kn">import</span> <span class="nn">com.psddev.dari.db.Recordable</span><span class="o">;</span>
              
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Article</span> <span class="kd">extends</span> <span class="n">Content</span> <span class="o">{</span>
              
                  <span class="kd">private</span> <span class="n">String</span> <span class="n">headline</span><span class="o">;</span>
              
                  <span class="nd">@Where</span><span class="o">(</span><span class="s">&quot;expertise = &#39;Lifestyle&#39;&quot;</span><span class="o">)</span>
                  <span class="kd">private</span> <span class="n">Author</span> <span class="n">author</span><span class="o">;</span>
              
              <span class="o">}</span>
              </pre></div>
              </td></tr></table></div>
              <p>In the previous snippet—</p>
              <ul class="simple">
              <li>Line 11 adds a property <code class="code docutils literal notranslate"><span class="pre">Author</span></code> to the Model <code class="code docutils literal notranslate"><span class="pre">Article</span></code>.</li>
              <li>Line 10 applies the annotation <code class="code docutils literal notranslate"><span class="pre">&#64;Where</span></code> that requires all authors associated with articles to have an expertise of <code class="code docutils literal notranslate"><span class="pre">Lifestyle</span></code>.</li>
              </ul>
              <div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
               2
               3
               4
               5
               6
               7
               8
               9
              10
              11
              12
              13
              14
              15
              16
              17
              18
              19
              20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">content.article</span><span class="o">;</span>
              
              <span class="kn">import</span> <span class="nn">com.psddev.dari.db.ValidationException</span><span class="o">;</span>
              
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ArticleGenerator</span> <span class="o">{</span>
              
                  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Article</span> <span class="nf">addArticle</span><span class="o">(</span><span class="n">Author</span> <span class="n">author</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Throwable</span> <span class="o">{</span>
                      <span class="n">Article</span> <span class="n">article</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Article</span><span class="o">();</span>
                      <span class="n">article</span><span class="o">.</span><span class="na">setHeadline</span><span class="o">(</span><span class="s">&quot;Is Your Destination Wedding on an Island Impacted by Global Warming?&quot;</span><span class="o">);</span>
                      <span class="n">article</span><span class="o">.</span><span class="na">setAuthor</span><span class="o">(</span><span class="n">author</span><span class="o">);</span>
              
                      <span class="k">try</span> <span class="o">{</span>
                          <span class="n">article</span><span class="o">.</span><span class="na">saveImmediately</span><span class="o">();</span>
                      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ValidationException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                          <span class="cm">/* Error handling...*/</span>
                          <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
                      <span class="o">}</span>
                      <span class="k">return</span> <span class="n">article</span><span class="o">;</span>
                  <span class="o">}</span>
              <span class="o">}</span>
              </pre></div>
              </td></tr></table></div>
              <p>In the previous snippet—</p>
              <ul class="simple">
              <li>Lines 7–19 implement a method for programmatically adding articles to a database.<ul>
              <li>Line 10 associates the passed <code class="code docutils literal notranslate"><span class="pre">author</span></code> with the new article.</li>
              <li>Lines 12–17 initiate the article’s save lifecycle, at which time Dari performs data validation. If the passed author has an expertise <code class="code docutils literal notranslate"><span class="pre">Lifestyle</span></code>, the try-catch block passes; if the author has an expertise different from <code class="code docutils literal notranslate"><span class="pre">Lifestyle</span></code>, the try-catch block throws a <a class="reference external" href="https://artifactory.psdops.com/psddev-releases/com/psddev/dari-db/3.3.607-xe0f27a/dari-db-3.3.607-xe0f27a-javadoc.jar!/com/psddev/dari/db/ValidationException.html">ValidationException</a> error.</li>
              </ul>
              </li>
              </ul>
              <p>In addition to data validation, you can use the annotation <code class="code docutils literal notranslate"><span class="pre">&#64;Where</span></code> to filter results in a content picker. For example, the following snippet adds an annotation <code class="code docutils literal notranslate"><span class="pre">&#64;Where</span></code> that filters available authors to those whose expertise is <code class="code docutils literal notranslate"><span class="pre">Lifestyle</span></code>.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Where</span><span class="o">(</span><span class="s">&quot;expertise = &#39;Lifestyle&#39;&quot;</span><span class="o">)</span>
              <span class="kd">private</span> <span class="n">Author</span> <span class="n">author</span><span class="o">;</span>
              </pre></div>
              </div>
              <p>When a user opens the content picker, the available authors are those whose expertise is <code class="code docutils literal notranslate"><span class="pre">Lifestyle</span></code>.</p>
              <a class="reference internal image-reference" href="../../_images/content-picker-with-static-where.svg"><img alt="../../_images/content-picker-with-static-where.svg" src="../../_images/content-picker-with-static-where.svg" width="935" /></a>
              <p>You can also have a dynamic predicate for the <code class="code docutils literal notranslate"><span class="pre">&#64;Where</span></code> annotation, allowing for dynamic lookups in the <a class="reference internal" href="../../cms/glossary/index.html#term-content-picker"><span class="xref std std-term">Content Picker</span></a>.</p>
              <div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
              2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@Where</span><span class="o">(</span><span class="s">&quot;_id = ?/getArticles&quot;</span><span class="o">)</span>
              <span class="kd">private</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">Article</span><span class="o">&gt;</span> <span class="n">relatedStories</span><span class="o">;</span>
              </pre></div>
              </td></tr></table></div>
              <p>In the previous snippet, Brightspot renders the <a class="reference internal" href="../../cms/glossary/index.html#term-content-edit-form"><span class="xref std std-term">Content Edit Form</span></a> with a <a class="reference internal" href="../../cms/glossary/index.html#term-selection-field"><span class="xref std std-term">Selection Field</span></a> for items of type <code class="code docutils literal notranslate"><span class="pre">Article</span></code>. When the user clicks the selection field, Brightspot populates the content picker with articles in a set returned by the method <code class="code docutils literal notranslate"><span class="pre">getArticles</span></code>.</p>
              <p>Line 1 in the previous snippet uses the path <code class="code docutils literal notranslate"><span class="pre">?/getArticles</span></code>. The question mark <code class="code docutils literal notranslate"><span class="pre">?</span></code> represents the current object (similar to Java’s keyword <code class="code docutils literal notranslate"><span class="pre">this</span></code>), so the method <code class="code docutils literal notranslate"><span class="pre">getArticles</span></code> is a member of the current object.</p>
              <p>The following example shows how to implement a dynamic predicate that populates the content picker with articles having at least one tag shared with the current article in the content edit form.</p>
              <div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
               2
               3
               4
               5
               6
               7
               8
               9
              10
              11
              12
              13
              14
              15
              16
              17
              18
              19
              20
              21
              22
              23
              24
              25
              26
              27
              28
              29
              30
              31
              32
              33
              34
              35</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">content.article</span><span class="o">;</span>
              
              <span class="kn">import</span> <span class="nn">java.util.HashSet</span><span class="o">;</span>
              <span class="kn">import</span> <span class="nn">java.util.Set</span><span class="o">;</span>
              <span class="kn">import</span> <span class="nn">java.util.stream.Collectors</span><span class="o">;</span>
              
              <span class="kn">import</span> <span class="nn">com.psddev.cms.db.Content</span><span class="o">;</span>
              <span class="kn">import</span> <span class="nn">com.psddev.cms.db.ToolUi</span><span class="o">;</span>
              <span class="kn">import</span> <span class="nn">com.psddev.dari.db.Recordable</span><span class="o">;</span>
              
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Article</span> <span class="kd">extends</span> <span class="n">Content</span> <span class="o">{</span>
              
                  <span class="nd">@Recordable.Required</span>
                  <span class="kd">private</span> <span class="n">String</span> <span class="n">headline</span><span class="o">;</span>
              
                  <span class="nd">@ToolUi.RichText</span>
                  <span class="kd">private</span> <span class="n">String</span> <span class="n">body</span><span class="o">;</span>
              
                  <span class="nd">@Indexed</span>
                  <span class="kd">private</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="n">tags</span><span class="o">;</span>
              
                  <span class="nd">@Where</span><span class="o">(</span><span class="s">&quot;tags = ?/getTags&quot;</span><span class="o">)</span>
                  <span class="kd">private</span> <span class="n">Article</span> <span class="n">relatedStory</span><span class="o">;</span>
              
                  <span class="cm">/* Getters and Setters */</span>
              
                  <span class="nd">@ToolUi.Hidden</span>
                  <span class="nd">@Ignored</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span>
                  <span class="kd">public</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="nf">getTags</span><span class="o">()</span> <span class="o">{</span>
                      <span class="k">if</span> <span class="o">(</span><span class="n">tags</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                          <span class="k">return</span> <span class="n">tags</span><span class="o">;</span>
                      <span class="o">}</span>
                      <span class="k">return</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">();</span>
                  <span class="o">}</span>
              <span class="o">}</span>
              </pre></div>
              </td></tr></table></div>
              <p>In the previous snippet—</p>
              <ul>
              <li><p class="first">Lines 11–23 declare a content type <code class="code docutils literal notranslate"><span class="pre">Article</span></code> with four fields: headline, body, tags, and a selection field for a related story.</p>
              <img alt="../../_images/content-edit-form-with-where.png" src="../../_images/content-edit-form-with-where.png" />
              </li>
              <li><p class="first">Line 19 applies an <code class="code docutils literal notranslate"><span class="pre">&#64;Indexed</span></code> annotation, allowing Dari to search for all the tags associated with a given article.</p>
              </li>
              <li><p class="first">Line 22 applies a dynamic <code class="code docutils literal notranslate"><span class="pre">&#64;Where</span></code> annotation. The annotation populates the content picker with articles whose tags are in the set returned by the method <code class="code docutils literal notranslate"><span class="pre">getTags</span></code>.</p>
              </li>
              <li><p class="first">Lines 27–34 implement the method <code class="code docutils literal notranslate"><span class="pre">getTags</span></code>:</p>
              <ul>
              <li><p class="first">Line 27 applies the <code class="code docutils literal notranslate"><span class="pre">&#64;ToolUi.Hidden</span></code> annotation, which prevents the method’s results from appearing in the content edit form.</p>
              </li>
              <li><p class="first">Line 28 applies the <code class="code docutils literal notranslate"><span class="pre">&#64;Ignored(false)</span></code> annotation, which ensures the method is run when the user clicks on the selection field.</p>
              </li>
              <li><p class="first">Line 29 declares the method’s return type, a set of tags.</p>
              </li>
              <li><p class="first">Lines 31 returns a set of tags in the current article (if any). Brightspot uses this list in the <code class="code docutils literal notranslate"><span class="pre">&#64;Where</span></code> annotation to populate the content picker.</p>
              <a class="reference internal image-reference" href="../../_images/content-picker-with-dynamic-where.svg"><img alt="../../_images/content-picker-with-dynamic-where.svg" src="../../_images/content-picker-with-dynamic-where.svg" width="827" /></a>
              </li>
              <li><p class="first">Line 33 returns an empty set if the current article has no tags.</p>
              </li>
              </ul>
              </li>
              </ul>
              <p><strong>See also:</strong></p>
              <ul class="simple">
              <li><a class="reference internal" href="../../cms/developers-guide/sites/multi-site.html#querying-with-site-restrictions"><span class="std std-ref">Querying with Site Restrictions</span></a></li>
              <li><a class="reference internal" href="../../cms/editorial-guide/modules/lists/dynamic.html"><span class="doc">Dynamic Lists</span></a></li>
              </ul>
              </div>
              <div class="section" id="routingfilter-path">
              <span id="routing-filter-label"></span><h2>&#64;RoutingFilter.Path<a class="headerlink" href="#routingfilter-path" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Class</p>
              <p>Specifies the application path for the target servlet. The purpose of the annotation is to group servlets together under a particular path segment. The annotation is equivalent of the Java <code class="code docutils literal notranslate"><span class="pre">&#64;WebServlet</span></code> annotation, but includes an optional <code class="docutils literal notranslate"><span class="pre">application</span></code> argument to organize servlets into logical groups.</p>
              <p>In the following example, the annotation specifies the path of the servlet using the required and optional arguments. The optional <code class="docutils literal notranslate"><span class="pre">application</span></code> argument is the group path for logically related servlets. The required <code class="docutils literal notranslate"><span class="pre">value</span></code> argument specifies the rest of the URL path where the target servlet is located.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@RoutingFilter.Path</span><span class="o">(</span><span class="n">application</span> <span class="o">=</span> <span class="s">&quot;auth&quot;</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/admin/employees&quot;</span><span class="o">)</span>
              <span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthenticateUsers</span> <span class="kd">extends</span> <span class="n">PageServlet</span> <span class="o">{</span>
              
              <span class="o">...</span>
              
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>If the routing filter is set in Tomcat’s context.xml, that setting overrides the application path specified in the annotation. For example, the following application path in context.xml would be used instead of the value specified in the above annotation:</p>
              <div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Environment</span> <span class="na">name=</span><span class="s">&quot;dari/routingFilter/applicationPath/auth&quot;</span> <span class="na">type=</span><span class="s">&quot;java.lang.String&quot;</span> <span class="na">value=</span><span class="s">&quot;/admin/users&quot;</span> <span class="nt">/&gt;</span>
              </pre></div>
              </div>
              </div>
              <div class="section" id="updatetrackable-names">
              <h2>&#64;UpdateTrackable.Names<a class="headerlink" href="#updatetrackable-names" title="Permalink to this headline">¶</a></h2>
              <p>Applies to: Class</p>
              <p>Specifies the fields in the target class for which you want to track updates. Dari provides an API that indicates whether instances of a class were updated within a specified period of time. This includes new instances that are created as well as existing instances that are changed.</p>
              <p>In the following code snippet, the <code class="code docutils literal notranslate"><span class="pre">&#64;UpdateTrackable.Names</span></code> annotation specifies tracking of the <code class="docutils literal notranslate"><span class="pre">activityUser</span></code> and <code class="docutils literal notranslate"><span class="pre">project</span></code> fields in the <code class="code docutils literal notranslate"><span class="pre">Activity</span></code> class.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="nd">@UpdateTrackable.Names</span><span class="o">(</span> <span class="o">{</span><span class="s">&quot;activityUser&quot;</span><span class="o">,</span> <span class="s">&quot;project&quot;</span><span class="o">})</span>
              </span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Activity</span> <span class="kd">extends</span> <span class="n">Record</span> <span class="o">{</span>
              
                 <span class="nd">@Indexed</span>
                 <span class="kd">private</span> <span class="n">User</span> <span class="n">activityUser</span><span class="o">;</span>
              
                 <span class="nd">@Indexed</span>
                 <span class="kd">private</span> <span class="n">Project</span> <span class="n">project</span><span class="o">;</span>
              
                 <span class="kd">private</span> <span class="n">Date</span> <span class="n">activityDate</span><span class="o">;</span>
                 <span class="kd">private</span> <span class="n">String</span> <span class="n">activityType</span><span class="o">;</span>
              
               <span class="c1">// Getters and Setters</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              <p>The <a class="reference external" href="https://artifactory.psdops.com/psddev-releases/com/psddev/dari-db/3.3.607-xe0f27a/dari-db-3.3.607-xe0f27a-javadoc.jar!/com/psddev/dari/db/UpdateTrackable.Static.html">UpdateTrackable.Static.isUpdated</a> method indicates whether instances of a specified class were updated within a specified time period. In the following example, a boolean is returned that indicates if <code class="docutils literal notranslate"><span class="pre">activityUser</span></code> or <code class="docutils literal notranslate"><span class="pre">project</span></code> values were created or changed for any <code class="code docutils literal notranslate"><span class="pre">Activity</span></code> instances over the last hour.</p>
              <div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Code</span> <span class="o">{</span>
                 <span class="kd">public</span> <span class="kd">static</span> <span class="n">Object</span> <span class="nf">main</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Throwable</span> <span class="o">{</span>
                   <span class="kt">long</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">3600000</span><span class="o">;</span>
                   <span class="n">String</span><span class="o">[]</span> <span class="n">type</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;Activity&quot;</span><span class="o">};</span>
              <span class="hll">     <span class="k">return</span> <span class="o">(</span><span class="n">UpdateTrackable</span><span class="o">.</span><span class="na">Static</span><span class="o">.</span><span class="na">isUpdated</span><span class="o">(</span><span class="n">type</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="n">time</span><span class="o">));</span>
              </span>   <span class="o">}</span>
              <span class="o">}</span>
              </pre></div>
              </div>
              </div>
              </div>
              
              
                    </div>
</body>
</html>
